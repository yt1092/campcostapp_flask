<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>費用計算アプリ</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input[type="number"] { width: 100px; }
    table { border-collapse: collapse; margin-top: 15px; }
    td, th { border: 1px solid #999; padding: 8px; text-align: center; }
    .center { text-align: center; }
  </style>
</head>
<body>
  <h2>費用計算アプリ</h2>

  <form method="POST">
    <p>食費: <input type="number" name="food_cost" value="{{ '{:,}'.format(food_cost) }}" step="1"></p>
    <p>交通費: <input type="number" name="transport_cost" value="{{ '{:,}'.format(transport_cost) }}" step="1"></p>
    <p>キャンプ場代: <input type="number" name="camp_cost" value="{{ '{:,}'.format(camp_cost) }}" step="1"></p>

    <table>
      <tr>
        <th>メンバー</th>
        <th>食費免除</th>
        <th>交通費免除</th>
        <th>キャンプ免除</th>
      </tr>
      {% for i, member in enumerate(members) %}
      <tr>
        <td>{{ member.name }}</td>
        <td><input type="checkbox" name="food_exempt_{{ i }}" {% if member.food %}checked{% endif %}></td>
        <td><input type="checkbox" name="transport_exempt_{{ i }}" {% if member.transport %}checked{% endif %}></td>
        <td><input type="checkbox" name="camp_exempt_{{ i }}" {% if member.camp %}checked{% endif %}></td>
      </tr>
      {% endfor %}
    </table>

    <div class="center">
      <button type="submit">計算する</button>
    </div>
  </form>

  {% if results %}
  <h3>結果</h3>
  <table>
    <tr><th>メンバー</th><th>支払額</th></tr>
    {% for i, result in enumerate(results) %}
      <tr>
        <td>{{ members[i].name }}</td>
        <td>{{ "{:,}".format(result) }} 円</td>
      </tr>
    {% endfor %}
  </table>
  {% endif %}
</body>
</html>
