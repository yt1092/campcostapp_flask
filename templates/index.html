<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>キャンプ費用計算ツール</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-4">
    <h1 class="text-center mb-4">キャンプ費用計算ツール</h1>

    <form method="post" class="card p-4 shadow-sm">
      <div class="mb-3">
        <label class="form-label fw-bold">食費</label>
        <input type="number" name="food" class="form-control" value="{{ food }}" required>
      </div>
      <div class="mb-3">
        <label class="form-label fw-bold">交通費</label>
        <input type="number" name="transport" class="form-control" value="{{ transport }}" required>
      </div>
      <div class="mb-3">
        <label class="form-label fw-bold">キャンプ場代</label>
        <input type="number" name="camp" class="form-control" value="{{ camp }}" required>
      </div>

      <div class="mb-3">
        <label class="form-label fw-bold">人数</label>
        <input type="number" name="people" class="form-control" value="{{ people }}" min="1" max="10" required>
      </div>

      <hr>
      <h5>メンバー設定</h5>

      {% for i in range(people) %}
      <div class="card mb-2 p-3">
        <div class="row">
          <div class="col-md-3 mb-2">
            <input type="text" name="name_{{ i }}" class="form-control" value="{{ names[i] }}">
          </div>
          <div class="col-md-3 form-check">
            <input type="checkbox" name="food_exempt_{{ i }}" class="form-check-input" id="food_ex_{{ i }}" {% if food_ex[i] %}checked{% endif %}>
            <label for="food_ex_{{ i }}" class="form-check-label">食費免除</label>
          </div>
          <div class="col-md-3 form-check">
            <input type="checkbox" name="transport_exempt_{{ i }}" class="form-check-input" id="trans_ex_{{ i }}" {% if transport_ex[i] %}checked{% endif %}>
            <label for="trans_ex_{{ i }}" class="form-check-label">交通費免除</label>
          </div>
          <div class="col-md-3 form-check">
            <input type="checkbox" name="camp_exempt_{{ i }}" class="form-check-input" id="camp_ex_{{ i }}" {% if camp_ex[i] %}checked{% endif %}>
            <label for="camp_ex_{{ i }}" class="form-check-label">キャンプ場代免除</label>
          </div>
        </div>
      </div>
      {% endfor %}

      <button type="submit" class="btn btn-primary w-100 mt-3">計算する</button>
    </form>

    {% if results %}
    <div class="card p-4 mt-4 shadow-sm">
      <h4 class="mb-3">結果</h4>
      <ul class="list-group">
        {% for i in range(people) %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ names[i] }}
          <span class="fw-bold">{{ results[i] }} 円</span>
        </li>
        {% endfor %}
      </ul>
    </div>
    {% endif %}
  </div>
</body>
</html>
